%!TEX root = /Users/louis/Documents/PhD/Deliverables/Thesis/thesis.tex

\chapter{Implementation}
\label{Implementation}
Section~\ref{sec:requirements_identification} presented requirements for structures and processes for identifying and managing co-evolution. This chapter describes the way in which the requirements have been approached. Several related structures were implemented, using domain-specific languages, metamodelling and model management operations. Figure~\ref{fig:implementation_overview} summarises the contents of the chapter. To facilitate the management of non-conformant models with existing modelling frameworks, a metamodel-independent syntax was devised and implemented (Section~\ref{sec:mmi_syntax}). To address some of the challenges faced in user-driven co-evolution, an OMG specification for a textual modelling notation was implemented (Section~\ref{sec:notation}). To determine their merits and drawbacks, existing languages for specifying model migration were identified, analysed and compared (Section~\ref{sec:analyis_of_languages_used_for_migration}). Finally, a new model transformation language -- tailored for model migration and centred around a novel approach to relating source and target model elements -- was designed and implemented (Section~\ref{sec:flock}). 

\begin{figure}[htbp]
  \begin{center}
    \leavevmode
    \includegraphics[width=12cm]{5.Implementation/overview.pdf}
  \end{center}
  \caption{Implementation chapter overview.}
  \label{fig:implementation_overview}
\end{figure}


\input{5.Implementation/mmi_syntax}
\input{5.Implementation/textual_modelling_notation}
\input{5.Implementation/analysis_of_languages_used_for_migration}
\input{5.Implementation/flock}


\section{Chapter Summary}
Three structures for identifying and managing co-evolution have been designed and implemented to approach the thesis requirements outlined in Chapter~\ref{Analysis}. The way in which modelling frameworks implicitly enforce conformance makes managing non-conformant models challenging, and the proposed metamodel-independent syntax (Section~\ref{sec:mmi_syntax}) extends modelling frameworks to facilitate the management of non-conformant models. The proposed textual modelling notation Section~\ref{sec:notation}, Epsilon HUTN, provides a human-usable notation as an alternative to XMI for managing user-driven co-evolution. Finally, the model migration language (Section~\ref{sec:flock}) contributes a domain-specific language for describing model migration.

The metamodel-independent syntax is a modelling framework extension that makes explicit the conformance relationship between models and metamodels. By binding models not to their metamodel but to a generic metamodel, the metamodel-independent syntax allows non-conformant models to be managed with modelling tools and model management operations. Furthermore, conformance checking is provided as a service, which can be scheduled at any time, and not just when models are loaded. The metamodel-independent syntax has been integrated with Concordance \cite{rose10concordance} to provide a metamodel installation process that automatically reports conformance problems, and underpins the implementation of the second structure described in this chapter, a textual modelling notation.

For performing user-driven co-evolution, the textual modelling notation described in Section~\ref{sec:notation} provides an alternative to XMI. Unlike XMI, the notation introduced in this chapter implements the OMG standard for Human-Usable Textual Notation (HUTN) \cite{hutn} and is optimised for human usability. Epsilon HUTN, introduced here, is presently the sole reference implementation of HUTN. Constructing Epsilon HUTN atop the metamodel-independent syntax allows Epsilon HUTN to provide incremental and background conformance checking, and an XMI-to-HUTN transformation for loading non-conformant models. Section~\ref{sec:exemplar_user-driven_co-evo} explores the benefits and drawbacks of using the metamodel-independent syntax and Epsilon HUTN together to perform user-driven co-evolution.

The domain-specific language described in Section~\ref{sec:flock}, Epsilon Flock, combines several concepts from existing model-to-model transformation languages to form a language tailored to model migration. In particular, Flock contributes a novel mechanism for relating source and target model elements termed conservative copy, which is a hybrid of new- and existing-target styles of model-to-model transformation. Flock is built atop Epsilon and hence interoperates transparently with several modelling technologies via the Epsilon Model Connectivity layer. Conservative copy is compared with new- and existing-target styles of transformation in Section~\ref{sec:quantitive}, and Flock is evaluated with respect to other co-evolution tools in Sections~\ref{sec:collaborative_comparison} and~\ref{sec:ttc} respectively.

The metamodel-independent syntax, Epsilon HUTN, Epsilon Flock and Concordance have been released as part of Epsilon in the Eclipse GMT \cite{gmt} project, which is the research incubator of arguably the most widely used MDE modelling framework, EMF. By re-using parts of Epsilon, the structures were implemented more rapidly than would have been possible when developing the structures independently. In particular, re-using the Epsilon Model Connectivity layer facilitated interoperability of Flock with several MDE modelling frameworks, which was exploited to manage a practical case of model migration in Section~\ref{sec:ttc}.
